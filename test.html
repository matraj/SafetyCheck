<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="styles.css">
	<link href='http://fonts.googleapis.com/css?family=Roboto:500,400' rel='stylesheet' type='text/css'>
	<title>Safety Check</title>
	<script type="text/javascript">
		//var count = 0;
		function populate(sensorvalue, sensorid, sensortime)
		{
		  	var element= document.getElementById(sensorid + 'Main');
		  	var textnode;
			if (typeof(element) != 'undefined' && element != null)
			{

		 	if (sensorvalue < 1)
			 {
			 	element.innerHTML = "<div class=\"color green\"></div><a href= \"hazard.html\"><div class= \"info\"><h5 class= \"time\">" + sensortime + "</h5><h4>H2S Detected</h4><h5 class= \"ppm\">" + sensorvalue + "ppm </h5> </div> </a> ";
			 }
			 else if((sensorvalue > 1) && (sensorvalue > 2))
			 {
			 	element.innerHTML = "<div class=\"color yellow\"></div><a href= \"hazard.html\"><div class= \"info\"><h5 class= \"time\">" + sensortime + "</h5><h4>H2S Detected</h4><h5 class= \"ppm\">" + sensorvalue + "ppm </h5> </div> </a>";
			 }
			 else
			 {
			 	element.innerHTML = "<div class=\"color orange\"></div><a href= \"hazard.html\"><div class= \"info\"><h5 class= \"time\">" + sensortime + "</h5><h4>H2S Detected</h4><h5 class= \"ppm\">" + sensorvalue + "ppm </h5> </div> </a>";
			 }
			 //alert(parentelement.innerHTML);
							//alert(sensorvalue);
			}
			else
			{
			    var parentelement = document.getElementById("mainbody");
		 	  	var newelement = document.createElement('div');
		 	  	newelement.id = sensorid + 'Main';
		 	  	newelement.className = 'hazard';
		 	  	parentelement.appendChild(newelement);

		 	  	if (sensorvalue < 1)
		 	  	{
			 	  	var clrelement = document.createElement('div');
			 	  	clrelement.className = 'color green';
			 	  	newelement.appendChild(clrelement);
			 	}
		 	  	else if((sensorvalue > 1) && (sensorvalue > 2))
		 	  	{
			 	  	var clrelement = document.createElement('div');
			 	  	clrelement.className = 'color yellow';
			 	  	newelement.appendChild(clrelement);
			 	}
		 	  	else
		 	  	{
			 	  	var clrelement = document.createElement('div');
			 	  	clrelement.className = 'color orange';
			 	  	newelement.appendChild(clrelement);
			 	}

			  var aelement = document.createElement('a');
			  aelement.href = 'hazard.html';
			  newelement.appendChild(aelement);

			  var infoelement = document.createElement('div');
			  infoelement.className = 'info';
			  aelement.appendChild(infoelement);

			  var h5element = document.createElement('h5');
			  h5element.className = 'time';
			  textnode = document.createTextNode(sensortime);
			  h5element.appendChild(textnode);
			  // h5element.innerhtml = '2:25 pm';
			  infoelement.appendChild(h5element);

			  var h4element = document.createElement('h4');
			  textnode = document.createTextNode('H2S Detected');
			  h4element.appendChild(textnode);
			  infoelement.appendChild(h4element);

			  var h5_1element = document.createElement('h5');
			  h5_1element.className = 'ppm';
			  textnode = document.createTextNode(sensorvalue + 'ppm');
			  h5_1element.appendChild(textnode);
			  infoelement.appendChild(h5_1element);


			// Feed Data
			element= document.getElementById(sensorid + 'Feed');
			if (typeof(element) != 'undefined' && element != null)
			{
				
		 	if (sensorvalue < 1)
			 {
			 	element.innerHTML = "<div class=\"color green\"></div><a href= \"hazard.html\"><div class= \"info\"><h5 class= \"time\">" + sensortime + "</h5><h4>H2S Detected</h4><h5 class= \"ppm\">" + sensorvalue + "ppm </h5> </div> </a> ";
			 }
			 else if((sensorvalue > 1) && (sensorvalue > 2))
			 {
			 	element.innerHTML = "<div class=\"color yellow\"></div><a href= \"hazard.html\"><div class= \"info\"><h5 class= \"time\">" + sensortime + "</h5><h4>H2S Detected</h4><h5 class= \"ppm\">" + sensorvalue + "ppm </h5> </div> </a>";
			 }
			 else
			 {
			 	element.innerHTML = "<div class=\"color orange\"></div><a href= \"hazard.html\"><div class= \"info\"><h5 class= \"time\">" + sensortime + "</h5><h4>H2S Detected</h4><h5 class= \"ppm\">" + sensorvalue + "ppm </h5> </div> </a>";
			 }
			}
			else
			{
			    parentelement = document.getElementById("feedbody");
		 	  	newelement = document.createElement('div');
		 	  	newelement.id = sensorid + 'Feed';
		 	  	newelement.className = 'hazard';
		 	  	parentelement.appendChild(newelement);

		 	  	if (sensorvalue < 1)
		 	  	{
			 	  	clrelement = document.createElement('div');
			 	  	clrelement.className = 'color green';
			 	  	newelement.appendChild(clrelement);
			 	}
		 	  	else if((sensorvalue > 1) && (sensorvalue > 2))
		 	  	{
			 	  	clrelement = document.createElement('div');
			 	  	clrelement.className = 'color yellow';
			 	  	newelement.appendChild(clrelement);
			 	}
		 	  	else
		 	  	{
			 	  	clrelement = document.createElement('div');
			 	  	clrelement.className = 'color orange';
			 	  	newelement.appendChild(clrelement);
			 	}

			  aelement = document.createElement('a');
			  aelement.href = 'hazard.html';
			  newelement.appendChild(aelement);

			  infoelement = document.createElement('div');
			  infoelement.className = 'info';
			  aelement.appendChild(infoelement);

			  h5element = document.createElement('h5');
			  h5element.className = 'time';
			  textnode = document.createTextNode(sensortime);
			  h5element.appendChild(textnode);
			  // h5element.innerhtml = '2:25 pm';
			  infoelement.appendChild(h5element);

			  h4element = document.createElement('h4');
			  textnode = document.createTextNode('H2S Detected');
			  h4element.appendChild(textnode);
			  infoelement.appendChild(h4element);

			  h5_1element = document.createElement('h5');
			  h5_1element.className = 'ppm';
			  textnode = document.createTextNode(sensorvalue + 'ppm');
			  h5_1element.appendChild(textnode);
			  infoelement.appendChild(h5_1element);
			}
			 // if (sensorvalue < 1)
			 // {
			 // 	parentelement_1.innerHTML = "<div class=\"hazard\"><div class=\"color green\"></div><a href= \"hazard.html\"><div class= \"info\"><h5 class= \"time\">" + sensortime + "</h5><h4>H2S Detected</h4><h5 class= \"ppm\">" + sensorvalue + "ppm </h5> </div> </a> </div>";
			 // }
			 // else if((sensorvalue > 1) && (sensorvalue > 2))
			 // {
			 // 	parentelement.innerHTML = "<div class=\"hazard\"><div class=\"color yellow\"></div><a href= \"hazard.html\"><div class= \"info\"><h5 class= \"time\">" + sensortime + "</h5><h4>H2S Detected</h4><h5 class= \"ppm\">" + sensorvalue + "ppm </h5> </div> </a> </div>";
			 // 	parentelement_1.innerHTML = "<div class=\"hazard\"><div class=\"color yellow\"></div><a href= \"hazard.html\"><div class= \"info\"><h5 class= \"time\">" + sensortime + "</h5><h4>H2S Detected</h4><h5 class= \"ppm\">" + sensorvalue + "ppm </h5> </div> </a> </div>";
			 // }
			 // else
			 // {
			 // 	parentelement.innerHTML = "<div class=\"hazard\"><div class=\"color orange\"></div><a href= \"hazard.html\"><div class= \"info\"><h5 class= \"time\">" + sensortime + "</h5><h4>H2S Detected</h4><h5 class= \"ppm\">" + sensorvalue + "ppm </h5> </div> </a> </div>";
			 // 	parentelement_1.innerHTML = "<div class=\"hazard\"><div class=\"color orange\"></div><a href= \"hazard.html\"><div class= \"info\"><h5 class= \"time\">" + sensortime + "</h5><h4>H2S Detected</h4><h5 class= \"ppm\">" + sensorvalue + "ppm </h5> </div> </a> </div>";
			 // }
			 //alert(parentelement.innerHTML);
							//alert(sensorvalue);
			}
		}

		function callEvery5Sec(){

			var xmlhttp;
			if (window.XMLHttpRequest)
			  {// code for IE7+, Firefox, Chrome, Opera, Safari
			  xmlhttp=new XMLHttpRequest();
			  }
			else
			  {// code for IE6, IE5
			  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
			  }
			xmlhttp.onreadystatechange=function()
			  {
			  if ((xmlhttp.readyState==4) && (xmlhttp.status==200))
			    {
			    	var data = xmlhttp.responseText;
			    	data = data.substring(0, data.length - 1);
			      	var sensor = data.split(",");
			      	for(var i = 0; i < sensor.length; i += 3)
			      	{
			      		//alert(sensor[i+1]);
				  		populate(sensor[i], sensor[i+1], sensor[i+2]);
			      	}
			    }
			  }
			xmlhttp.open("GET","361.php",true);
			xmlhttp.send();
			
			setTimeout(callEvery5Sec, 5000);
		}	
	</script>


</head>

<!-- Data Base Connection Authentication -->


<body onload = "callEvery5Sec()">
	<input type="checkbox" id="dashboard-checkbox">
  
  	<nav role="navigation" class="mobile-menu">
    	<ul>
      		<a href="index.php"><li><img src="Images/home.png">Dashboard</li></a>
      		<a href="list.php"><li><img src="Images/mysite.png">My Site</li></a>
      		<a href="myhistory.php"><li><img src="Images/history.png">My History</li></a>
      		<a href="sites.html"><li><img src="Images/list.png">Site List</li></a>
      		<a href="#"><li><img src="Images/settings.png">Settings</li></a>
    	</ul>
 	</nav>

 	<label for="dashboard-checkbox" id="dashboard-overlay"></label>

	<header class="navbar">
		<div class="container">
			<label for="dashboard-checkbox" id="dashboard-menu-btn">
				<img src="Images/menu.png">
			</label>
			<h1>Dashboard</h1>	
		</div>
	</header>

	<div id = "mainbody" class="dashboard-top">
<!-- DYNAMIC ALERT STATUS -->

		<div class="hazard">
			<div class="color orange"></div>
			<a href="hazard.html">
			<div class="info">
				<h5 class="time">2:25 pm</h5>
				<h4>H2S Detected</h4>
				<h5 class="ppm">ppm</h5>
			</div>
			</a>
		</div>

		<div class="hazard">
			<div class="color yellow"></div>
			<a href="hazard.html">
			<div class="info">
				<h5 class="time">1:34 pm</h5>
				<h4>Carbon Monoxide Detected</h4>
				<h5 class="ppm">3.1415928 ppm</h5>
			</div>
			</a>
		</div>
	</div>

	<div class="divider">
		<a href="list.php"><img src="Images/forward-arrow.png"></a>
		<h3>My Site</h3>

	</div>

	<div id = 'feedbody' class="feed">
		<div class="hazard">
			<div class="color orange"></div>
			<a href="hazard.html">
			<div class="info">
				<h5 class="time">2:25 pm</h5>
				<h4>H2S Detected</h4>
				<h5 class="ppm"> ppm</h5>
			</div>
			</a>
		</div>

		<div class="hazard">
			<div class="color yellow"></div>
			<a href="hazard.html">
			<div class="info">	
				<h5 class="time">1:34 pm</h5>
				<h4>Carbon Monoxide Detected</h4>			
				<h5 class="ppm">3.1415928 ppm</h5>
			</div>
			</a>
		</div>

		<div class="hazard">
			<div class="color green"></div>
			<a href="hazard.html">
			<div class="info">	
				<h5 class="time">Jul 11</h5>
				<h4>Methane Detected</h4>			
				<h5 class="ppm">5.5435 ppm</h5>
			</div>
			</a>
		</div>
	</div>
	
</body>
</html>